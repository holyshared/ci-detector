{"version":3,"sources":["ci-detector.coffee"],"names":[],"mappings":"AAAA,IAAA;;AAAA,QAAA,GAAW,SAAC,GAAD,EAAM,MAAN;AACT,MAAA;AAAA,OAAA,UAAA;;IACE,MAAM,CAAC,cAAP,CAAsB,MAAtB,EAA8B,GAA9B,EAAmC;MAAA,KAAA,EAAO,KAAP;KAAnC;AADF;SAEA;AAHS;;AAKX,QAAA,GAAW,MAAM,CAAC,OAAP,GAAiB;EAC1B,SAAA,EAAW,EADe;EAG1B,QAAA,EAAU,SAAC,IAAD,EAAO,OAAP;IACR,IAAC,CAAA,SAAU,CAAA,IAAA,CAAX,GAAmB;WACnB,IAAE,CAAA,IAAA,GAAO,IAAP,CAAF,GAAiB,SAAC,GAAD;aAAS,CAAK,IAAA,OAAA,CAAQ,GAAR,CAAL,CAAkB,CAAC,YAAnB,CAAA;IAAT;EAFT,CAHgB;EAO1B,MAAA,EAAQ,SAAC,GAAD;AACN,QAAA;IAAA,SAAA,GAAY,QAAA,CAAS,MAAM,CAAC,MAAP,CAAc,GAAd,CAAT,EAA6B,EAA7B;AAEZ;AAAA,SAAA,WAAA;;MACE,OAAA,GAAc,IAAA,OAAA,CAAQ,SAAR;MACd,IAAA,CAAgB,OAAO,CAAC,YAAR,CAAA,CAAhB;AAAA,iBAAA;;MACA,aAAA,GAAgB;AAChB;AAJF;WAKA;EARM,CAPkB;;;AAkB5B,MAAM,CAAC,cAAP,CAAsB,QAAtB,EAAgC,UAAhC,EAA4C;EAAA,GAAA,EAAK,SAAA;WAC/C,IAAC,CAAA;EAD8C,CAAL;CAA5C;;AAGA,QAAA,GAAW,OAAA,CAAQ,WAAR;;AAEX,KAAA,gBAAA;;EACE,QAAQ,CAAC,QAAT,CAAkB,IAAlB,EAAwB,OAAxB;AADF","file":"ci-detector.js","sourceRoot":"/source/","sourcesContent":["readOnly = (env, target) ->\n  for key, value of env\n    Object.defineProperty target, key, value: value\n  target\n\nregistry = module.exports = {\n  _adaptors: {}\n\n  register: (name, adaptor) ->\n    @_adaptors[name] = adaptor\n    @['is' + name] = (env) -> (new adaptor(env)).isCurrentEnv()\n\n  lookup: (env) ->\n    envReader = readOnly Object.create(env), {}\n\n    for name, Adaptor of @adaptors\n      adaptor = new Adaptor envReader\n      continue unless adaptor.isCurrentEnv()\n      detectAdaptor = adaptor\n      break\n    detectAdaptor\n}\n\nObject.defineProperty registry, 'adaptors', get: ->\n  @_adaptors\n\nadaptors = require './adaptor'\n\nfor name, adaptor of adaptors\n  registry.register name, adaptor\n"]}